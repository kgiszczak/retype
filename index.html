<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Retype documentation</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;javascript&quot;,&quot;html&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <div class="logo">retype</div>
        <div class="lang-selector">
              <a href="#" data-language-name="javascript">javascript</a>
              <a href="#" data-language-name="html">html</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://github.com/kgiszczak/retype'>Source Code</a></li>
            <li><a href='https://github.com/tripit/slate'>Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Library to save and restore cursor position on contenteditable elements. You can use it to create functionality like Twitter&rsquo;s hashtags. It works by inserting special character in place of cursor, manipulating the text and then replacing this special character with cursor.</p>

<p>You can find source code <a href="https://github.com/kgiszczak/retype">here</a>.</p>

<h1 id="installation">Installation</h1>

<p>jQuery is required for this plugin to work. In your HTML file, load simply by: <code class="prettyprint">&lt;script src=&quot;retype.min.js&quot;&gt;&lt;/script&gt;</code>
Both the minified and uncompressed (for development) versions are in the <code class="prettyprint">/dist</code> directory.</p>

<h1 id="usage">Usage</h1>

<p>This plugin works on contenteditable elements.</p>

<h2 id="simple-usage">Simple usage</h2>
<pre class="highlight html"><code><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"editor"</span> <span class="na">contenteditable=</span><span class="s">"true"</span> <span class="na">spellcheck=</span><span class="s">"false"</span><span class="nt">&gt;&lt;/div&gt;</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">$</span><span class="p">(</span><span class="s1">'#editor'</span><span class="p">).</span><span class="nx">retype</span><span class="p">(</span><span class="s1">'#!'</span><span class="p">);</span>
</code></pre>

<p>Initialize it with string containing triggering characters. Everytime you type one of those characters it will be replaced with html tag.</p>

<div class="editor-wrapper">
  <div id="editor1" class="editor" contenteditable="true" spellcheck="false">Lorem ipsum #dolor sit !amet.</div>
</div>

<script>
  $('#editor1').retype('#!');
</script>

<h2 id="full-control">Full control</h2>
<pre class="highlight html"><code><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"editor"</span> <span class="na">contenteditable=</span><span class="s">"true"</span> <span class="na">spellcheck=</span><span class="s">"false"</span><span class="nt">&gt;&lt;/div&gt;</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">$</span><span class="p">(</span><span class="s1">'#editor'</span><span class="p">).</span><span class="nx">retype</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">html</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">html</span><span class="p">();</span>
  <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">retype</span><span class="p">.</span><span class="nx">CARET_CHAR</span><span class="p">;</span>

  <span class="nx">html</span> <span class="o">=</span> <span class="nx">html</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&lt;</span><span class="se">\/?</span><span class="sr">span</span><span class="se">[^</span><span class="sr">&gt;</span><span class="se">]</span><span class="sr">*&gt;/ig</span><span class="p">,</span> <span class="s1">''</span><span class="p">);</span>

  <span class="nx">html</span> <span class="o">=</span> <span class="nx">html</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s1">'f'</span> <span class="o">+</span> <span class="nx">c</span> <span class="o">+</span> <span class="s1">'?o'</span> <span class="o">+</span> <span class="nx">c</span> <span class="o">+</span> <span class="s1">'?o'</span><span class="p">,</span> <span class="s1">'ig'</span><span class="p">),</span>
    <span class="s1">'&lt;span class="tag tag1"&gt;$&amp;&lt;/span&gt;'</span><span class="p">);</span>
  <span class="nx">html</span> <span class="o">=</span> <span class="nx">html</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s1">'b'</span> <span class="o">+</span> <span class="nx">c</span> <span class="o">+</span> <span class="s1">'?a'</span> <span class="o">+</span> <span class="nx">c</span> <span class="o">+</span> <span class="s1">'?r'</span><span class="p">,</span> <span class="s1">'ig'</span><span class="p">),</span>
    <span class="s1">'&lt;span class="tag tag2"&gt;$&amp;&lt;/span&gt;'</span><span class="p">);</span>
  <span class="nx">html</span> <span class="o">=</span> <span class="nx">html</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s1">'b'</span> <span class="o">+</span> <span class="nx">c</span> <span class="o">+</span> <span class="s1">'?a'</span> <span class="o">+</span> <span class="nx">c</span> <span class="o">+</span> <span class="s1">'?z'</span><span class="p">,</span> <span class="s1">'ig'</span><span class="p">),</span>
    <span class="s1">'&lt;span class="tag tag3"&gt;$&amp;&lt;/span&gt;'</span><span class="p">);</span>

  <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">html</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>

<p>If you want to have full control over what is replaced you can initialize this plugin with callback function. For example to wrap every occurance of words <code class="prettyprint">foo</code>, <code class="prettyprint">bar</code> or <code class="prettyprint">baz</code> with a span element you can do it like this:</p>

<div class="editor-wrapper">
  <div id="editor2" class="editor" contenteditable="true" spellcheck="false">Lorem foo ipsum bar dolor baz sit amet</div>
</div>

<script>
  $('#editor2').retype(function() {
    var html = $(this).html();
    var c = $.retype.CARET_CHAR;

    html = html.replace(/<\/?span[^>]*>/ig, '');

    html = html.replace(new RegExp('f' + c + '?o' + c + '?o', 'ig'), '<span class="tag tag1">$&</span>');
    html = html.replace(new RegExp('b' + c + '?a' + c + '?r', 'ig'), '<span class="tag tag2">$&</span>');
    html = html.replace(new RegExp('b' + c + '?a' + c + '?z', 'ig'), '<span class="tag tag3">$&</span>');

    $(this).html(html);
  });
</script>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="javascript">javascript</a>
                <a href="#" data-language-name="html">html</a>
          </div>
      </div>
    </div>
  </body>
</html>
